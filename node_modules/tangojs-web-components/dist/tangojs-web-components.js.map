{"version":3,"file":"tangojs-web-components.js","sources":["../src/util/mixins/withPolledModel.js","../src/util/converters.js","../src/util/mixins/withReflectedAttribute.js","../src/util/helpers.js","../src/util/mixins/withReflectedAttributes.js","../src/util/fn.js","../src/tangojs-web-components.js"],"sourcesContent":["\n/**\n * Adds support for periodically polled model(s).\n *\n * Prototype that mixes this in should expose following functions:\n * - onModelRead  {function(resultMap: Object): undefined}\n * - onModelError {function(error: Object): undefined}\n * - createProxy  {function(model: string): (AttributeProxy|DeviceProxy)}\n * - readProxy    {function(proxy: (AttributeProxy|DeviceProxy)):\n *                  (DeviceAttribute|DevState)}\n *\n * Following functions and properties are added:\n * - proxy {Object}\n * - onModelChange {function(model: string): undefined}\n * - onPollPeriodChange {function(pollPeriod: number): undefined}\n * - restartPollingTimer {function(): undefined}\n */\nexport default function () {\n\n  const timer = Symbol.for('timer')\n  const proxy = Symbol.for('proxy')\n\n  if (!this.createProxy) {\n    console.warn(`Mixing prototype lacks 'createProxy' method.`)\n  }\n\n  if (!this.readProxy) {\n    console.warn(`Mixing prototype lacks 'readProxy' method.`)\n  }\n\n  if (!this.onModelRead) {\n    this.onModelRead = function () {}\n  }\n\n  if (!this.onModelError) {\n    this.onModelError = function (error) {\n      console.error(error)\n    }\n  }\n\n  Object.defineProperty(this, 'proxy', {\n    configurable: false,\n    get: function () { return this[proxy] }\n  })\n\n  this.onModelChange = function (model) {\n    this[proxy] = (Array.isArray(model) ? model : [model])\n      .reduce((p, m) => (p[m] = this.createProxy(m), p), {})\n    this.restartPollingTimer()\n  }\n\n  this.onPollPeriodChange = function (pollPeriod) {\n    this.restartPollingTimer()\n  }\n\n  this.restartPollingTimer = function () {\n\n    if (this[timer]) {\n      clearInterval(this[timer])\n    }\n\n    this[timer] = setInterval(() => {\n\n      const promisedResults = Object\n        .keys(this[proxy])\n        .map(m => this.readProxy(this[proxy][m]).then(x => [m, x]))\n\n      Promise.all(promisedResults)\n        .then(results => {\n          const resultsMap = results.reduce(\n            (acc, [m, x]) => (acc[m] = x, acc),\n            {})\n          this.onModelRead(resultsMap)\n        })\n        .catch(error => {\n          this.onModelError(error)\n        })\n    }, this.pollPeriod) // FIXME: poolPeriod may be stored in mixin closure.\n  }\n\n}\n","\n/**\n * Conversion functions between IDL attributes and content attributes.\n * @see https://html.spec.whatwg.org/multipage/infrastructure.html#reflecting-content-attributes-in-idl-attributes\n */\n\n/*\n * For simplicity we assume that there are five data types:\n * - Number\n * - String\n * - Boolean\n * - Array (containing data of types shown above)\n * - Object (everything else)\n *\n * Object type cannot be converted.\n *\n * IDL attribute is a Javascript entity, backed by content attribute.\n * Content attribute is a plain-old javascript string.\n */\n\nconst stringIdentity = x => `${x}`\n\nconst jsonParse = x => JSON.parse(x)\nconst jsonStringify = x => JSON.stringify(x)\n\nconst arrayParse = (x, elemParse) => x.split(',').map(e => elemParse(e.trim()))\nconst arrayStringify = (x, elemStringify) => x.map(elemStringify).join(',')\n\nconst booleanParse = x => x !== null\nconst booleanStringify = x => ''\n\nconst normalizeType = type => {\n  if (Array.isArray(type)) {\n    return type.map(normalizeType)\n  } else {\n    switch (type) {\n      case Array:\n      case 'Array':\n      case 'array': return Array\n      case Number:\n      case 'Number':\n      case 'number': return Number\n      case Boolean:\n      case 'Boolean':\n      case 'boolean': return Boolean\n      case String:\n      case 'String':\n      case 'string': return String\n    }\n    throw new Error(`Unsupported type ${type}.`)\n  }\n}\n\nexport function getConvertToAttribute (type) {\n  const ntype = normalizeType(type)\n  if (Array.isArray(ntype) && ntype[0] === Array) {\n    return x => arrayStringify(x, getConvertToAttribute(ntype[1]))\n  } else {\n    switch (ntype) {\n      case Number: return jsonStringify\n      case Boolean: return booleanStringify\n      case String: return stringIdentity\n    }\n    throw new Error(`No converter found for ${ntype} type.`)\n  }\n}\n\nexport function getConvertFromAttribute (type) {\n  const ntype = normalizeType(type)\n  if (Array.isArray(ntype) && ntype[0] === Array) {\n    return x => arrayParse(x, getConvertFromAttribute(ntype[1]))\n  } else {\n    switch (ntype) {\n      case Number: return jsonParse\n      case Boolean: return booleanParse\n      case String: return stringIdentity\n    }\n    throw new Error(`No converter found for ${ntype} type.`)\n  }\n}\n\nexport function getDefaultValue (type) {\n  const ntype = normalizeType(type)\n  if (Array.isArray(ntype) && ntype[0] === Array) {\n    return []\n  } else {\n    switch (ntype) {\n      case Number: return 0\n      case Boolean: return false\n      case String: return ''\n    }\n    throw new Error(`No default value found for ${ntype} type.`)\n  }\n}\n","\nimport * as converters from '../converters'\n\n/**\n * Adds Javascript property that reflects DOM attribute.\n * @param {Object}                         descriptor\n * @param {string}                         descriptor.attributeName\n * @param {string}                         descriptor.reflectedName\n * @param {Function|string}                descriptor.type\n * @param {Object}                         descriptor.defaultValue\n * @param {function(t: Object): undefined} descriptor.onChange\n */\nexport default function withReflectedAttribute ({attributeName,\n                                                 reflectedName,\n                                                 type,\n                                                 defaultValue,\n                                                 onChange}) {\n\n  const toAttribute = converters.getConvertToAttribute(type)\n  const fromAttribute = converters.getConvertFromAttribute(type)\n\n  const createdCallback = this.createdCallback || (() => {})\n  const attributeChangedCallback = this.attributeChangedCallback || (() => {})\n\n  const onChangeCallback = onChange || (() => {})\n\n  if (!defaultValue && defaultValue !== false) {\n    defaultValue = converters.getDefaultValue(type)\n  }\n\n  if (type === Boolean || type === 'boolean' || type === 'Boolean') {\n    Object.defineProperty(this, reflectedName, {\n      configurable: false,\n      get: function () {\n        return this.hasAttribute(attributeName)\n      },\n      set: function (value) {\n        if (value === true) {\n          this.setAttribute(attributeName, '')\n        } else {\n          this.removeAttribute(attributeName)\n        }\n      }\n    })\n  } else {\n    Object.defineProperty(this, reflectedName, {\n      configurable: false,\n      get: function () {\n        const value = this.getAttribute(attributeName)\n        if (value !== null) {\n          return fromAttribute(value)\n        } else {\n          return defaultValue\n        }\n      }, set: function (value) {\n        this.setAttribute(attributeName, toAttribute(value))\n      }\n    })\n  }\n\n  this.createdCallback = function () {\n    createdCallback.call(this)\n    onChangeCallback.call(this, this[reflectedName])\n  }\n\n  this.attributeChangedCallback = function (localName, oldValue, newValue) {\n    if (localName === attributeName) {\n      onChangeCallback.call(this, this[reflectedName])\n    }\n    attributeChangedCallback.call(this, localName, oldValue, newValue)\n  }\n\n}\n","\nimport { components } from '../tangojs-web-components'\n\n/**\n * @typedef {Object} ComponentCapabilities\n * @property {boolean} multipleModels supports multiple models?\n * @property {boolean} attributes     supports attributes?\n * @property {boolean} commands       supports commands?\n * @property {boolean} status         supports status-fields?\n * @property {boolean} readOnly       supports read-only attributes?\n */\n\n/**\n * @typedef {Object} ComponentDescriptor\n * @property {string}                tag          tag name\n * @property {ComponentCapabilities} capabilities supported caps.\n */\n\n/**\n * Registers custom element as a TangoJS component.\n * @param {string}                 tagName\n * @param {Object}                 constructor\n * @param {?ComponentCapabilities} capabilities\n * @param {Object}                 attributes\n */\nexport function registerComponent (tagName,\n                                   constructor,\n                                   capabilities = {},\n                                   attributes = {}) {\n\n  const registeredConstructor = window.document.registerElement(tagName, {\n    prototype: constructor.prototype\n  })\n\n  Object.defineProperty(registeredConstructor, 'descriptor', {\n    value: {\n      tag: tagName,\n      capabilities,\n      attributes\n    }\n  })\n\n  components[constructor.name] = registeredConstructor\n}\n\n/**\n * Returns owner document of current script.\n * @return {HTMLDocument}\n */\nexport function getCurrentDocument () {\n  const document = window.document\n  const currentScript = (document._currentScript || document.currentScript)\n  return currentScript.ownerDocument\n}\n\n/**\n * Loads stylesheet from external HTML file.\n * @param {string} styleModuleId\n * @param {?string} stylesheetId\n * @return {HTMLStyleElement}\n */\nexport function importStyleModule (styleModuleId, stylesheetId) {\n  const currentDocument = getCurrentDocument()\n  const styleModule = currentDocument.getElementById(styleModuleId).import\n  const style = stylesheetId\n    ? styleModule.getElementById(stylesheetId)\n    : styleModule.querySelector('style')\n  return currentDocument.importNode(style, true)\n}\n\nexport function hypenatedForm (s) {\n  return s.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n}\n\nexport function camelCasedForm (s) {\n  return s.replace(/-([a-z])/g, (g) => g[1].toUpperCase())\n}\n","\nimport withReflectedAttribute from './withReflectedAttribute'\n\nimport { hypenatedForm } from '../helpers'\n/**\n * Applies withReflectedAttribute muliple times.\n * @param {Object} descriptors\n */\nexport default function withReflectedAttributes (descriptorMap) {\n\n  Object.keys(descriptorMap).forEach(reflectedName => {\n    const newDescriptor = Object.assign(\n      {},\n      descriptorMap[reflectedName],\n      {\n        reflectedName,\n        attributeName: hypenatedForm(reflectedName)\n      })\n    withReflectedAttribute.call(this, newDescriptor)\n  })\n}\n","\n/**\n * Various functional operations.\n */\n\n/**\n * @param {Array<T>} array\n * @param {function(t: T): V} fn\n * @return {Array<[V, Array<T>]}\n */\nexport function groupBy (array, fn) {\n  const map =  array.reduce((grouped, element) => {\n    const key = fn(element)\n    if (!grouped.has(key)) {\n      grouped.set(key, [])\n    }\n    grouped.get(key).push(element)\n    return grouped\n  }, new Map())\n  return [...map]\n}\n","import withPolledModel from './util/mixins/withPolledModel'\nimport withReflectedAttribute from './util/mixins/withReflectedAttribute'\nimport withReflectedAttributes from './util/mixins/withReflectedAttributes'\nimport * as helpers from './util/helpers'\nimport * as converters from './util/converters'\nimport * as fn from './util/fn'\n\n/**\n * Container for registered components.\n */\nexport const components = { }\n\n\n/**\n * Utility functions for components\n */\nexport const util = Object.assign(\n  {},\n  helpers,\n  { fn },\n  { converters },\n  {\n    mixins: {\n      withPolledModel,\n      withReflectedAttribute,\n      withReflectedAttributes\n    }\n  })\n"],"names":["converters.getDefaultValue","converters.getConvertFromAttribute","converters.getConvertToAttribute"],"mappings":"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"}